
static def api_tests_defaults(job, String pathToSuiteXml){
    job.with {
        description('Testing API\'s')

        definition {
            cpsScm {
                scm {
                    git('https://github.com/jenkinsci/job-dsl-plugin.git')
                }
            }
        }

        logRotator(30, 15, -1, -1)

        goals('clean surefire-report:report -Dsurefire.suiteXmlFiles=' + pathToSuiteXml)

        triggers {
            cron("0 23 * * *")
        }
    }
}

mavenJob("API_TEST"){
    api_tests_defaults(delegate, 'src/test/resources/api/Automation.xml')
    goals('clean install')
}